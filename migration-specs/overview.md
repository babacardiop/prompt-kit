# ğŸš€ Prompt Kit â€” Prompt-Driven Software Generation Framework

> "From human specifications to verifiable, versioned, and traceable AI-generated code."

---

## ğŸ§© 1. The Problem

AI coding assistants (Copilot, Cursor, Claude Codeâ€¦) boost productivity but lack structure, traceability, and governance.

Teams struggle with:
- No clear mapping between specifications and generated code
- Manual edits break generated logic with no re-verification mechanism
- Inconsistent agent behavior and code style
- No auditable record of what the AI produced or changed

---

## ğŸ’¡ 2. The Solution â€” Prompt Kit

Prompt Kit transforms prompting into a governed engineering process.

Inspired by GitHub's Spec-Kit, it re-imagines the idea for Prompt-Driven Generation (PDG). Instead of directly generating code and tests, Prompt Kit produces **structured prompt series** â€” reusable, parameterized instructions that generate and verify software through governed AI execution.

---

## ğŸ§± 3. Governance Pillars

| Pillar | Definition | Benefit |
|--------|------------|---------|
| ğŸ§¾ **Logging** | Every execution records inputs, outputs, agent used, and compile results | Reproducibility |
| ğŸ”— **Traceability** | Each generated file includes headers with series/version/agent metadata | Auditability |
| ğŸ—‚ï¸ **Versioning** | All AI-altered files and prompts are archived before updates | Rollback safety |
| ğŸ§± **Compilation Validation** | Code is compiled post-generation to guarantee syntactic integrity | Trust |

Together they make Prompt Kit a **CI/CD-grade AI development system**.

---

## ğŸ”„ 4. Lifecycle Overview

### Creation Flow
```
/specify   â†’ define developer specs
/clarify   â†’ resolve ambiguities
/plan      â†’ produce task roadmap
/tasks     â†’ summarize actionable steps
/implement â†’ emit prompt series (generation + verification)
```

### Operational Flow
```
/execute   â†’ run prompt series (full or partial)
/validate  â†’ re-run verifications anytime
/merge     â†’ extend existing series with new specs (version bump)
/migrate   â†’ re-generate code to new prompt version
```

---

## ğŸ§  5. Prompt Series Structure

```
/prompts/
  /DTO-Synchronizer/
    /1.3.8/
      manifest.yaml
      generate-dto.prompt.md
      verify-dto.prompt.md
/logs/
/archive/
```

Each prompt file defines metadata:

```yaml
---
id: generate-dto
series: DTO-Synchronizer
version: 1.3.8
type: generation
inputs:
  - entityName
  - targetPath
---
```

---

## âš™ï¸ 6. Key Commands

### `/implement` â€” Create Prompt Series

Creates prompt templates and manifest from planned tasks.  
**Does not generate code** â€” only prompt instructions.

### `/execute` â€” Run Generation Pipeline

```bash
prompt-kit /execute <series> [version]
  [--from <start>] [--to <end>] 
  [--only a,b] [--skip x,y] 
  [--interactive|--non-interactive] 
  [--agent claude]
```

Runs generation and verification prompts, asks for missing inputs, applies the four pillars, logs and compiles.

### `/validate` â€” Re-Run Verification Prompts

```bash
prompt-kit /validate <series> [version] [--only a,b]
```

Checks that manual or external changes did not break generated contracts.

### `/merge` â€” Evolve Existing Prompt Series

```bash
prompt-kit /merge <series> [version] @newSpecs.md
```

ğŸ§  *The edit mode of `/specify`.*

**Flow:**
1. Load existing series (manifest + prompts)
2. Run `/clarify â†’ /plan â†’ /tasks â†’ /implement` in update mode
3. Perform housekeeping:
   - Backup current prompts â†’ `/archive`
   - Create new version folder
   - Modify or extend prompt files
   - Inject headers with "Merged From" and timestamp
4. Optionally compile for validation
5. Log changes (added / modified / removed)

### `/migrate` â€” Upgrade Generated Code

```bash
prompt-kit /migrate <series> --from <old> --to <new> [--scope path|phase|all]
```

Detects old-version trace headers, re-runs equivalent prompts from the new version, and regenerates safe scaffolds while preserving manual code.

---

## ğŸ” 7. Command Relationships

| Command | Affects | Pipeline | Scope |
|---------|---------|----------|-------|
| `/specify` | Prompts | Yes | Create new series |
| `/merge` | Prompts | Yes | Update existing series |
| `/execute` | Code | No | Generate artifacts |
| `/validate` | Code | No | Verify artifacts |
| `/migrate` | Code | No | Upgrade artifacts |

---

## ğŸ§© 8. Execution Granularity

| Option | Meaning |
|--------|---------|
| `--phase` | Run single phase |
| `--from` / `--to` | Run range of phases |
| `--only` / `--skip` | Include or exclude phases |
| `--interactive` | Ask for inputs |
| `--non-interactive` | Use cached defaults |
| `--agent` | Override default agent |

---

## ğŸ§± 9. Versioning and Traceability

Every artifact carries metadata:

```csharp
// <auto-generated>
// This file was generated by Prompt Kit v2.0.0 (Prompt-Driven Generation)
// </auto-generated>
// Created on: 2025-10-15 23:04:00
// Series: DTO-Synchronizer
// Version: 1.4.0
// Source Spec: @add-edit-dto.md
// Generated by: claude-3.5-sonnet
```

- All previous versions backed up to `/archive/series/version/`
- Logs written to `/logs/YYYY-MM-DD/<series>_run.json`

---

## ğŸ”Ÿ 10. Example Lifecycle

```bash
# Create initial series
prompt-kit /specify @FullLayerSpec.md
prompt-kit /clarify
prompt-kit /plan
prompt-kit /tasks
prompt-kit /implement
prompt-kit /execute FullLayer 1.0.0

# Extend behavior
prompt-kit /merge FullLayer 1.0.0 @AddEditFlowSpec.md
prompt-kit /execute FullLayer 1.1.0

# Re-verify and upgrade
prompt-kit /validate FullLayer 1.1.0
prompt-kit /migrate FullLayer --from 1.0.0 --to 1.1.0
```

---

## ğŸ§­ 11. Human-Safe Generation Architecture

### Goal

AI-generated files must be regenerable without overwriting human extensions.  
Prompt Kit enforces language-specific patterns to protect developer code.

### C# Rules

| Aspect | Rule |
|--------|------|
| **Classes** | Always partial |
| **Methods** | Generated methods are virtual |
| **Custom Files** | `*.Custom.cs` added automatically |
| **Migration** | `/migrate` ignores `*.Custom.cs` |
| **Manual Edits** | Developers extend via partials/overrides only |

**Example:**

```csharp
// BuildingDto.cs (auto-generated)
public partial class BuildingDto
{
  public int Id { get; set; }
  public virtual void Validate() { /* generated */ }
}

// BuildingDto.Custom.cs (user code)
public partial class BuildingDto
{
  public override void Validate()
  {
    base.Validate();
    if (string.IsNullOrEmpty(Name))
      throw new ValidationException("Name cannot be empty.");
  }
}
```

âœ… `/migrate` updates only `BuildingDto.cs`; `BuildingDto.Custom.cs` remains untouched.

### React + TypeScript Rules

| Aspect | Rule |
|--------|------|
| **Components** | Split into `*.generated.tsx` and `*.custom.tsx` |
| **Exports** | `index.tsx` combines both |
| **Hooks** | Generated hooks are pure/stateless |
| **Migration** | Only `*.generated.*` files overwritten |

**Example:**

```tsx
// BuildingList.generated.tsx
export const BuildingList = ({ buildings }: { buildings: Building[] }) => (
  <ul>{buildings.map(b => <li key={b.id}>{b.name}</li>)}</ul>
);

// BuildingList.custom.tsx
import { BuildingList } from './BuildingList.generated';
export const BuildingListExtended = (props) => (
  <div className="p-4 border">
    <h2>Enhanced Building List</h2>
    <BuildingList {...props} />
  </div>
);
```

âœ… During migration or merge, `.generated.tsx` files can change; `.custom.tsx` stay safe.

### Housekeeping

- Detect headers or filename patterns (`*.Custom.cs`, `*.custom.tsx`)
- Never overwrite manual files during `/migrate`, `/merge`, or `/execute`
- Compile both base + custom files after regeneration
- Report any conflict but do not modify manual code

### Manual Extension Schema in Prompts

```yaml
manualExtension:
  pattern:
    csharp: "*.Custom.cs"
    react: "*.custom.tsx"
  strategy: preserve
  comment: "Add overrides here; Prompt Kit will ignore these files during migration."
```

---

## âœ… 12. Benefits Summary

| Aspect | Advantage |
|--------|-----------|
| **Governance** | Every AI action is logged and traceable |
| **Evolution** | `/merge` and `/migrate` keep prompts and code in sync |
| **Safety** | Manual code is never overwritten |
| **Flexibility** | Partial/virtual patterns for C# and custom split for React |
| **Scalability** | Granular phase execution and versioned series enable CI/CD integration |

---

## ğŸ”® 13. Strategic Summary

**Prompt Kit gives AI development the same rigor CI/CD gave manual development.**

Every prompt, generation, and change is traceable, verifiable, and safe for human collaboration. It bridges AI creativity and software engineering discipline.

---

## ğŸ§  14. Executive Pitch

> *"Prompt Kit turns AI-generated code into an auditable engineering asset. We can generate, evolve, and migrate entire software layers without losing manual craftsmanship or traceability. It's the future of governed AI software development."*

---

<div align="center">
  <strong>From Specifications to Production â€” Governed by Design</strong>
</div>
